---
// src/pages/list.astro
import BaseLayout from '../layouts/BaseLayout.astro'; // Ganti dengan layout Anda
import { getCollection } from 'astro:content';

const allPosts = await getCollection('blog');

// Urutkan berdasarkan judul, case-insensitive
const sortedPosts = allPosts.sort((a, b) => {
  const titleA = a.data.title.toLowerCase();
  const titleB = b.data.title.toLowerCase();
  if (titleA < titleB) return -1;
  if (titleA > titleB) return 1;
  return 0;
});

// Kelompokkan berdasarkan huruf pertama
const postsByLetter = sortedPosts.reduce((acc, post) => {
  const firstLetter = post.data.title[0].toUpperCase();
  if (!acc[firstLetter]) {
    acc[firstLetter] = [];
  }
  acc[firstLetter].push(post);
  return acc;
}, {});

---

<BaseLayout title="Indeks Postingan (A-Z)" description="Semua postingan, diurutkan berdasarkan abjad.">
    <main>
      <h5>Indeks Postingan (A-Z)</h5>

      <div class="index-grid">
        {Object.keys(postsByLetter).sort().map((letter) => (
          <section>
              <h5>{letter}</h5> {/* Gunakan h5 untuk huruf */}
              <ul>
                  {postsByLetter[letter].map((post) =>(
                      <li>
                        <a href={`/blog/${post.id}`}>{post.data.title}</a>
                      </li>
                  ))}
              </ul>
          </section>
        ))}
      </div>
    </main>
</BaseLayout>

<style>
    /* CSS Reset Sederhana */
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    body {
        font-family: sans-serif; /* Contoh */
    }

    main {
        width: 100%; /* Tetap 100% */
        max-width: 100%; /* Hapus atau ubah max-width di sini */
        margin: 0 auto;
        padding: 1rem;
    }

    h1 {
        text-align: center;
        margin-bottom: 2rem;
    }

    .index-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); /* Ganti auto-fill ke auto-fit */
        gap: 1rem; /* Perkecil sedikit */
        justify-content: center; /* Pusatkan grid */
    }

    section {
        break-inside: avoid;
    }

    h5 {
        font-size: 1.5rem;
        margin-bottom: 0.5rem;
        color: #333;
        font-weight: bold;
    }

    ul {
        list-style: none;
        padding: 0;
    }

    li {
        margin-bottom: 0.25rem;
        padding-left: 0.5rem;
        /* border-left: 3px solid #007bff; */
    }

    a {
        text-decoration: none;
        color: #007bff;
        transition: color 0.2s ease;
    }

    a:hover {
        color: #0056b3;
    }

     /* Khusus Mobile */
    @media (max-width: 768px) {
        main {
            padding: 0.5rem; /* Padding lebih kecil di mobile */
        }
        .index-grid {
            gap: 0.5rem;  /* Spasi antar item lebih kecil di mobile */
             grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); /*Perkecil ukuran di mobile*/
        }
    }
</style>
