---
// layouts/BlogPost.astro (asumsi, jika belum ada perubahan)
import Layout from '../layouts/BlogPost.astro';

const judulList = [
    "86", "fremd tourche", "Arifureta", "Berserk of gluttony", "Classroom of the elite", "Date alive", "Death mage",
    "Death march", "Evil lord", "Garbage Brave: Yuusha No Fukushuu Monogatari", "Genius prince",
    "Hai to gensou no grimgar", "Hikawa-sensei Otakare", "Hikikomari Kyuuketsuki No Monmon",
    "I Got a Cheat Skill in Another World", "Inkya no Boku ni Batsu Game de Kokuhaku Shite",
    "Isekai Maou to Shoukan Shoujo Dorei Majutsu", "Isesuma", "Kage no Jitsuryokusha ni Naritakute",
    "Konosuba", "Kumo desu ga nani ka", "Kurasu No Daikiraina Joshi To Kekkon Suru", "Liar liar",
    "Maou Gakuen no Hangyakusha", "MKNR", "Mushoku tensei", "No game no life", "Omiai shitakunakatta", "Oregairu",
    "Otonari asobi", "Otonari no tenshi-sama", "Overlord", "Rein of the seven spellblades", "Roshidere",
    "Saijaku muhai no bahamut", "Seiken Gakuin no Maken Tsukai", "Seirei gensou",
    "Seirei Tsukai no Blade Dance", "Shiranai Uchi ni Kachigumi Jinsei", "Silver cross and vampire",
    "Sono mono nochi", "Summoned slaughter", "Tantei Wa Mou, Shindeiru", "Tensura", "The world of otome games",
    "Tsuki ga Michibiku Isekai Douchuu", "Ankoku Kishi", "10 nen goshi no HikiNiito o Yamete", "Battle divas",
    "Bofuri", "Boku no kanojo sensei", "Choppiri Toshiue Demo Kanojo Ni Shite Kuremasu Ka?",
    "Clearing an Isekai with the Zero-Believers Goddess – The Weakest Mage among the Classmates", "Danmachi",
    "Dokuzetsu Kuudere Bishoujo", "Dongeon battle royal", "Dungeon defense", "Ectas online", "Ero manga sensei",
    "Frame Failure", "Free Life Fantasy Online (FLFO)", "Fushi no Kami", "Gakusen toshi asterisk",
    "Genjitsu Shugi Yuusha no Oukoku Saikenki", "Gimai seikatsu", "Goblin slayer", "Hachinen tte",
    "Hataraku Maou Sama", "Hige wo soru", "Houkago no Seijo-san ga Toutoi dake ja Nai Koto wo Ore wa Shitteiru",
    "HsDxD", "I Woke Up Piloting the Strongest Starship, so I Became a Space Mercenary",
    "Imouto sae ireba", "In The Land of Leadale", "Incubus Banishment", "Infinite Dendrogram", "Instant death",
    "Is it tough being a friend?", "Isekai Mahou wa Okureteru", "Isekai wa Heiwa deshita",
    "Jaku chara tomozaki kun", "Kami wa Game ni Ueteiru",
    "Kawaii Onnanoko ni Kouryaku Sareru no Wa Suki desu ka?",
    "Kawaikereba Hentai demo Suki ni Natte Kuremasu ka?",
    "Kimi to Boku no Saigo no Senjo, Aruiha Sekai ga Hajimaru Seisen", "Kokoro connect",
    "Kokugensou wo Item Cheat de Ikinuku Arc 1 - The Rise in the World of Business", "Koujo Denka no Kateikyoushi",
    "Kuma kuma bear", "Kuro no Shoukanshi", "Lazy dungeon", "Level 99 villainous Daughter", "Log horizon",
    "Magic gems gourmet", "Majo no tabitabi", "Mamahaha no Tsurego", "Maou Gakuin no Futekigousha",
    "Maou ni Natta node, Dungeon Tsukutte Jingai Musume to Honobono Suru",
    "Mapping The Trash-Tier Skill That Got Me Into a Top-Tier Party",
    "Megami no Yuusha wo Taosu Gesu na Houhou The Dirty Way to Destroy the Goddess's Heroes", "Mondaiji tachi",
    "Musume Janakute Mama ga Suki nano", "My Gift LVL 9999 Unlimited Gacha", "Nee-chan wa chuunibyou",
    "Nidome no Yuusha wa Fukushuu no Michi wo Warai Ayumu", "Orc Harem", "Ore dake irerukakushi dungeon",
    "Ore no Iinazuki", "Re zero", "Rokudenashi Majutsu Koushi to Akashic Records",
    "Ryoushin no Shakkin wo Katagawari_shite Morau Jouken wa Nihonichi",
    "Saikyou Degarashi Ouji no An’yaku Teii Arasoi Munou wo Enjiru SS Rank Ouji wa Koui Keishou-sen wo Kage kara Shihai Suru",
    "Saikyou no Shien Shoku Wajutsushi deAru Ore", "SAO", "Seishun wa butayaro",
    "Sekai Saikou no Ansatsusha, Isekai Kizoku ni Tensei suru", "Sentouin, Hakenshimasu!", "Sevens",
    "Shijou Saikyou no Daimaou Murabito A ni Tensei Suru", "Shimotsuki san wa Mob ga Suki",
    "Shinigami ni Sodaterareta Shoujo wa Shikkoku no Ken dan Mune ni Idaku", "Shinmai Maou no Keiyakusha",
    "Solo leveling", "Spy Room", "Strike the blood", "Tensei kizoku",
    "Tensei Ōjo to Tensai Reijō no Mahō Kakumei", "The Greatest Magicmaster's Retirement Plan", "The new gate",
    "The rising of shield hero", "The Unexplored Summon Blood-Sign", "Together With The Dark Knight",
    "Tomodachi no Imouto ga Ore ni dake Uzai", "Uchi no musume", "Ultimate Antihero", "Unnamed Memory",
    "Watashi murimur", "Watashi, Nōryoku wa Heikinchi de tte Itta yo ne!", "Yujou senki",
    "Yumemiru Danshi wa Genjitsushugisha", "Yuusha ni Horobosareru"
  ];
---

<Layout
  title="List Novel"
  description="Daftar lengkap novel dari A-Z dengan fitur pencarian."
  pubDate={new Date('August 08 2021')}
  heroImage="/blog-placeholder-about.jpg"
>
  <div id="daftar-az">
    <h2 id="main-title">List Judul</h2>
    <form id="search-form">
      <input type="text" id="search-input" placeholder="Cari judul...">
      <button type="submit" id="search-button">
        <i class="fas fa-search"></i> Cari
      </button>
    </form>

    <div id="judul-container"></div>
    <p id="no-results">Tidak ada hasil yang ditemukan.</p>
  </div>

  <script>

    // Fungsi untuk membuat URL slug yang aman.
    function buatURL(judul) {
      return judul.toLowerCase().replace(/ /g, '-').replace(/[^a-z0-9-]/g, '').replace(/-+/g, '-').replace(/^-+|-+$/g, '');
    }

    // Fungsi utama untuk menampilkan daftar judul.
    function tampilkanDaftar(listJudul) {
      const daftarContainer = document.getElementById('judul-container');
      const noResultsMessage = document.getElementById('no-results');

      daftarContainer.innerHTML = ''; // Bersihkan kontainer.
      noResultsMessage.style.display = 'none'; // Sembunyikan pesan error.

      const judulPerHuruf = {};
      // Inisialisasi objek untuk pengelompokan.
      for (let i = 65; i <= 90; i++) { // A-Z
        judulPerHuruf[String.fromCharCode(i)] = [];
      }
      judulPerHuruf['Other'] = [];

      // Kelompokkan judul berdasarkan huruf pertama.
      listJudul.forEach(judul => {
        const firstChar = judul.charAt(0).toUpperCase();
        if (/[A-Z]/.test(firstChar)) {
          judulPerHuruf[firstChar].push(judul);
        } else {
          judulPerHuruf['Other'].push(judul);
        }
      });

      // Fungsi untuk membuat elemen judul (DRY principle).
      function buatElemenJudul(judul) {
        return `
          <div class="judul-item">
            <a href="/blog/${buatURL(judul)}">${judul}</a>
          </div>
        `;
      }

      // Buat dan tampilkan bagian "Other".
        function buatSection(huruf, judulArr){
          if (judulArr.length > 0) {
            return `
              <div class="letter-section">
                <h5>${huruf}</h5>
                ${judulArr.map(judul => buatElemenJudul(judul)).join('')}
              </div>
            `;
          }
          return ''; // Jika tidak ada judul, jangan tampilkan apa-apa
        }

        daftarContainer.innerHTML += buatSection('Other', judulPerHuruf['Other']);

      // Buat dan tampilkan bagian A-Z.
      for (let i = 65; i <= 90; i++) {
        const huruf = String.fromCharCode(i);
        daftarContainer.innerHTML += buatSection(huruf, judulPerHuruf[huruf]);
      }

      // Tampilkan pesan jika tidak ada hasil.
      if (listJudul.length === 0) {
        noResultsMessage.style.display = 'block';
      }
    }


    // Event listener untuk form submission (pencarian).
    document.getElementById('search-form').addEventListener('submit', function(event) {
      event.preventDefault();
      const kataKunci = document.getElementById('search-input').value.trim().toLowerCase();
      const hasilPencarian = judulList.filter(judul =>
        judul.toLowerCase().includes(kataKunci) || buatURL(judul).includes(kataKunci)
      );
      tampilkanDaftar(hasilPencarian);
    });

    // Event listener untuk input (real-time search).
     document.getElementById('search-input').addEventListener('input', function() {
      const kataKunci =  document.getElementById('search-input').value.trim().toLowerCase();
      const hasilPencarian = judulList.filter(judul =>
        judul.toLowerCase().includes(kataKunci) || buatURL(judul).includes(kataKunci)
      );
      tampilkanDaftar(hasilPencarian);
    });


    // Tampilkan daftar awal saat halaman dimuat.
    tampilkanDaftar(judulList);
  </script>

  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #f8f9fa;
      color: #212529;
      line-height: 1.6;
      margin: 0;
      padding: 0;
    }

    #daftar-az {
      max-width: 800px;
      margin: 20px auto;
      background-color: #fff;
      padding: 30px;
      border-radius: 8px;
      box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
    }

    /* Judul Halaman */
    #main-title {
      text-align: center;
      color: #007bff;
      margin-bottom: 30px;
      font-size: 2.5rem;
      font-weight: bold;
    }

    /* Form Pencarian */
    #search-form {
      display: flex;
      max-width: 400px;
      margin: 0 auto 30px;
    }

    #search-input {
      flex: 1;
      padding: 0.375rem 0.75rem;
      font-size: 1rem;
      border: 1px solid #ced4da;
      border-radius: 0.25rem;
      border-top-right-radius: 0;
      border-bottom-right-radius: 0;
    }

    #search-button {
      background-color: #007bff;
      color: #fff;
      border: 1px solid #007bff;
      padding: 0.375rem 0.75rem;
      border-radius: 0.25rem;
      border-top-left-radius: 0;
      border-bottom-left-radius: 0;
      cursor: pointer;
      transition: background-color 0.2s ease;
    }

    #search-button:hover {
      background-color: #0056b3;
      border-color: #0056b3;
    }

    /* Bagian per Huruf */
    .letter-section {
      margin-bottom: 25px;
    }

    .letter-section h5 {
      font-size: 1.5rem;
      margin-bottom: 1rem;
      color: #007bff;
      border-bottom: 2px solid #007bff;
      padding-bottom: 0.25rem;
      display: inline-block;
    }

    /* Item Judul */
    .judul-item {
      margin-left: 1.5rem;
      list-style: none;
      position: relative;
      padding-left: 1.25rem;
    }

    .judul-item::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0.6rem;
      width: 0.5rem;
      height: 0.5rem;
      background-color: #007bff;
      border-radius: 50%;
    }


    .judul-item a {
      text-decoration: none;
      color: #212529;
      display: block;
      padding: 0.25rem 0;
      transition: color 0.2s ease, background-color 0.2s ease;
    }

    .judul-item a:hover {
      color: #0056b3;
      background-color: #e9ecef;
      text-decoration: underline;
    }

    /* Pesan "Tidak Ditemukan" */
    #no-results {
      color: #6c757d;
      font-style: italic;
      text-align: center;
      margin-top: 1rem;
      display: none;
    }

    /* Responsif */
    @media (max-width: 768px) {
      #daftar-az {
        padding: 20px;
      }

      #main-title {
        font-size: 2rem;
      }

      #search-form {
        flex-direction: column;
      }

      #search-input {
        border-radius: 0.25rem;
        margin-bottom: 0.5rem;
        width: 100%;
      }

      #search-button {
        border-radius: 0.25rem;
        width: 100%;
      }
    }
  </style>
</Layout>
